---
category: blog
layout: post
date: "2017-05-09T20:44:41+09:00"
tags: [ "hardening", "mini-hardening" ]
---

# 078 Hardening: 参加記

<http://peatix.com/event/254844>

LAMP環境とかそういうのが与えられて、運営側から攻撃が飛んでくるので必死でさばく競技。
その地方大会。
チームで出て優勝しました。

## 学んだこと

具体的な攻撃内容は今後の運営の都合で控えてほしいということだったので、技術的な事実のみを書く。

-   RDP
    -   sshでtunnelingした上からRDPで繋いだが、両方始めて
    -   以前必要になったときは上手く動かなくてX11 forwardingに逃げたし、今回もWindows内のUbuntu仮想環境内から繋ごうとしていたメンバーの人はかなり苦戦していた
-   `/var/log/secure`
    -   sshdへのlogin試行や、sudo/suのそれなどが記載される
    -   手元のUbuntu 16.04では存在せず `/var/log/auth.log` が同等であるようだ
-   `last` `w`
    -   知ってはいるが個人で計算機を使う限り必要にならないやつ
    -   `last` はlogout時刻やreboot等の情報も出る
-   `~/.bash_history`
    -   他人のHOMEを覗くのはなんだか抵抗があったが「sudo権限あるなら別によいと思う」らしいのでそういうものなのかも。まあroot権限奪われてる状況下なので
-   `iptables`
    -   「操作は簡単だけどミスした場合に鯖から締め出し喰らうため、ステージング環境なしだとやりたくない」って複数人が言ってた
-   アカウントのロック
    -   そういう属性があるらしい
    -   後から検索して見つけたけど試してはいない。使うのはコマンドひとつ
-   バックアップは大事
    -   漏れがないようにしたい

## 他

主な勝因は他のメンバーが強かったこと。
この方向へは全員私より明らかに詳しかった。
また、運も勝因のひとつ。
チームごとにひとり攻撃担当者がついて攻撃をしたということなので、いくらかのばらつきはあるはず。
全体としては、適切なことを順にしていたら勝っていたという印象。

メンバーのひとりが、デグレしそうな面倒そうな作業を上手に処理していたのは印象的。
報告書とかメールのような私の苦手な作業はメンバーに頼んだのでその点は楽だった。

優勝賞品として、お菓子と沖縄での本家大会へのseed権を貰った。
お菓子は学校の部へ持っていって食べた。
seed権は握り潰してしまった。

沖縄大会に関して、

-   他の大会(チーム戦)と被りそう
-   旅費は自費
-   沖縄まで飛行機とか宿とか準備するの面倒
-   これまで特に出ようとは思っていなかったのだから、seed権を貰おうとそれは変化しないはずでは

あたりを考えねばならず、なんだか面倒だなあと思っていたら期限切れした。
勉強になるし楽しいし問題は手間と金だけなのだから出るべきだとは判断していたが、今回も動けなかった。悲しい。
今回のチームメンバーでは$2$人が沖縄に行くらしいので、彼らには私の分まで頑張ってほしい。
