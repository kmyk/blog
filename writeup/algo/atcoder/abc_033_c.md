---
layout: post
redirect_from:
  - /writeup/algo/atcoder/abc-033-c/
  - /blog/2016/02/06/abc-033-c/
date: 2016-02-06T23:22:52+09:00
tags: [ "competitive", "writeup", "atcoder", "abc", "brainfuck", "greedy" ]
---

# AtCoder Beginner Contest 033 C - 数式の書き換え

## [C - 数式の書き換え](https://beta.atcoder.jp/contests/abc033/tasks/abc033_c)

### 解説

解法としては貪欲で、逐次処理ができて空間計算量は$O(1)$。

桁数を決め打ちして答えを10進整数で持つ。
入力は1文字ずつ処理していく。
`+`か`\n`がきたらその左の項が$0$かそうでないかを見て答えをincrement。
項が$0$かどうかはその項を構成する文字の中に数字`0`が含まれるかで判定できる。
掛け算の記号`*`や`0`以外の数字は処理の上で無視することになる。

### 実装

提出には<https://github.com/kmyk/wrap-brainfuck>を用いた。

いたるところコピペなので実装はそう重くない。
10進固定精度整数はincrementしかしないのでトラック数2で実装してある。

``` brainfuck
>>>
++++++++++>> set zero
++++++++++>>
++++++++++>>
++++++++++>>
++++++++++>>
++++++++++>>
++++++++++>>

>+>+<[>> while flag
    ,[>+>+>+>+<<<<-]
    ++++++++++[>->---->---->----<<<<-]
    +>[<->[-]]<[- if newline
        <<->>
        <[
            <<<<- incr
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]< carry
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [>>]>>
        -]>
    ]
    +>>--[<<->>[-]]<<[- if mult
        nop
    ]
    +>>>---[<<<->>>[-]]<<<[- if add
        <[
            <<<<- incr
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]< carry
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [<+<<+>>>-]<[>+<-]+<<[>>-<<[-]]>>[<->>++++++++++<-]<
            [>>]>>
        -]>
        <+>
    ]
    +>>>>--------[<<<<->>>>[-]]<<<<[- if zero
        <[-]>
    ]
<<]

<<<
[<+<<+>>>-]<[>+<-]<<----------[>>+<<[-]]> >+< is putc flag
[<+<<+>>>-]<[>+<-]<<----------[>>+<<[-]]>
[<+<<+>>>-]<[>+<-]<<----------[>>+<<[-]]>
[<+<<+>>>-]<[>+<-]<<----------[>>+<<[-]]>
[<+<<+>>>-]<[>+<-]<<----------[>>+<<[-]]>
[<+<<+>>>-]<[>+<-]<<----------[>>+<<[-]]>
[<+<<+>>>-]<[>+<-]<<----------[>>+<<[-]]>

>[<+>>>+<<-]<[[-]++++++++++[>++++++<-]>-->[<->-]<.[-]<]>>[-] putc
>[<+>>>+<<-]<[[-]++++++++++[>++++++<-]>-->[<->-]<.[-]<]>>[-]
>[<+>>>+<<-]<[[-]++++++++++[>++++++<-]>-->[<->-]<.[-]<]>>[-]
>[<+>>>+<<-]<[[-]++++++++++[>++++++<-]>-->[<->-]<.[-]<]>>[-]
>[<+>>>+<<-]<[[-]++++++++++[>++++++<-]>-->[<->-]<.[-]<]>>[-]
>[<+>>>+<<-]<[[-]++++++++++[>++++++<-]>-->[<->-]<.[-]<]>>[-]
>[<+>>>+<<-]<[[-]++++++++++[>++++++<-]>-->[<->-]<.[-]<]>>[-]
++++++++++. newline
```
